<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="weather.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Bentham&family=Cookie&family=Fahkwang:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&family=Pattaya&family=Rochester&family=Rokkitt:ital,wght@0,100..900;1,100..900&family=Saira+Condensed:wght@100;200;300;400;500;600;700;800;900&family=Trirong:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Bentham&family=Cookie&family=Fahkwang:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Pattaya&family=Rochester&family=Rokkitt:ital,wght@0,100..900;1,100..900&family=Saira+Condensed:wght@100;200;300;400;500;600;700;800;900&family=Trirong:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
       
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Bentham&family=Calistoga&family=Cookie&family=Dancing+Script:wght@400..700&family=Fahkwang:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Pattaya&family=Rochester&family=Rokkitt:ital,wght@0,100..900;1,100..900&family=Saira+Condensed:wght@100;200;300;400;500;600;700;800;900&family=Trirong:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&family=Vidaloka&display=swap" rel="stylesheet">
        <title>Document</title>
</head>

<body>
    <div class="conatiner d-flex flex-column align-items-center justify-content-center  mainDiv">
      
        <input id="cityInput" onchange="countrySearch()" class=" citySearch fs-4" style="height: 60px;width: 360px;" type="search" placeholder="Enter city">           
   
        <div d="invalidCity"></div>
        
        <div style="background-image: url('https://i.pinimg.com/736x/d9/f4/f6/d9f4f6c905d9ef793e7667d5d393c2f2.jpg');"
            class="mt-3 card shadow text-center centerDiv mb-5">

            <div style="height: 250px; width:360px" class="cityDiv" id="citySec">



            </div>
            <div style="font-family: Afacad Flux serif;margin-top: -40px;" class="d-flex align-items-center justify-content-center flex-column footerDiv" id="tempSec">
                <div style="height: 90px; width:360px " class="card shadow degree mb-4 d-flex">
                    <h3 class="text-light"> <i class="fa-solid fa-globe fa-sm me-2" style="color: white;"></i>humidity
                    </h3><br>

                </div>
                <div style="height: 90px; width:360px " class="card shadow degree mb-4">
                    <h3 class="text-light"> <i class="fas fa-wind fa-sm me-2" style="color: white;"></i>wind</h3>

                </div>
                <div style="height: 90px; width:360px " class="card shadow degree mb-2">
                    <h3 class="text-light"> <i class="fa-solid fa-temperature-arrow-up fa-sm me-2"
                            style="color: white;"></i>feels like</h3>

                </div>
            </div>
        </div>
    </div>
    </div>
</body>

<script>

    const localtime = new Date()
    console.log(localtime);
    let hours = localtime.getHours()
    let minutes = localtime.getMinutes()
    let seconds = localtime.getSeconds()
    session = 'AM'
    if (hours >= 12) {
        hours = hours - 12
        session = 'PM'
    }

    let month = localtime.getMonth() + 1
    let day = localtime.getDate()
    let year = localtime.getFullYear()

    hours = (hours < 10 ? '0' : '') + hours;
    minutes = (minutes < 10 ? '0' : '') + minutes;
    citySec.innerHTML = ` <h4  style="font-family: Afacad Flux, serif" class="text-light fw-bold text-center mt-5">${hours}:${minutes}:${seconds}:${session} . ${month}/${day}/${year}</h4>`

    const countrySearch = async () => {
        const input = document.getElementById('cityInput');
        const citySec = document.getElementById('citySec');
        const tempSec = document.getElementById('tempSec');

        if (input.value != "") {
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${input.value}&appid=5b4bee0ba241d092159faf007e166080`);

                console.log(response);
                const result = await response.json();
                console.log(result);

                if (result.cod == 404) {
                    invalidCity.innerHTML=`<h3 class="text-danger fw-bold"> ${result.message}</h3>`
                } else {
                    const displayData = result;
                    console.log(displayData);

                    const tempCelcius = displayData.main.temp - 273.15; 
                    const tempFeelsCelcius = displayData.main.feels_like - 273.15;  
                
                    const weatherIcon = `https://openweathermap.org/img/wn/${displayData.weather[0].icon}@2x.png`;

                    citySec.innerHTML = `<div style="height: auto; width:360px" class="cityDiv" id="citySec">
                    <h1 style=" font-size:50px ;color: rgb(232, 129, 65);" class="text-center  fw-bold">${displayData.name}</h1>
                    <h5   style="font-family: Afacad Flux, serif" class="text-light fw-bold">${hours}:${minutes}:${seconds}:${session} . ${month}/${day}/${year}</h5>;
                    <h1 style="font-size: 60px;" class="text-light">${tempCelcius.toFixed(1)}<sup>o</sup>C
                          <img src="${weatherIcon}" alt="${displayData.weather[0].description}" style="width:100px"></h1>
                       <span style="color: rgb(232, 129, 65);  font-family: Afacad Flux, serif;"class="fs-1 fw-bold ">feels like ${tempFeelsCelcius.toFixed(1)}<sup>o</sup>C</span> `
               

                    // Update other sections (temperature, humidity, etc.)
                    const tempSec = document.getElementById('tempSec');
                    tempSec.innerHTML = `
                    <div style="height: 90px; width:360px;margin-top: 40px;" class="card shadow degree mb-4 ">
                        <h3 class="text-light"> <i class="fa-solid fa-globe fa-sm me-2" style="color: white;"></i>Humidity</h3><br>
                        <h5 class="text-light fw-bold"> ${displayData.main.humidity}%</h5>
                    </div>
                    <div style="height: 90px; width:360px " class="card shadow degree mb-4">
                        <h3 class="text-light"> <i class="fas fa-wind fa-sm me-2" style="color: white;"></i>Wind</h3><br>
                        <h5 class="text-light fw-bold">${displayData.wind.speed}%</h5>
                    </div>
                    <div style="height: 90px; width:360px " class="card shadow degree mb-3">
                        <h3 class="text-light"> <i class="fa-solid fa-temperature-arrow-up fa-sm me-2" style="color: white;"></i>feels like</h3><br>
                        <h5 class="text-light fw-bold">${tempFeelsCelcius.toFixed(1)}Â°C</h5>

                        </div>
                `
                }




            } catch (err) {
                alert("Failed to fetch data from the API");
            }
        } else {
            alert("Please enter the city name");
        }



    }



</script>

</html>